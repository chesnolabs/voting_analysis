}
}
ret
}
cordig(g)
as.numeric(5)/100
debug(cordig)
cordig(g)
as.numeric(wholes) + (as.numeric(hund)/100)
as.numeric(wholes) + 0.25
5 + 0.25
ret <- as.numeric(wholes)
ret <- ret + as.numeric(hund)/100
cordig <- function (s)
{
last1 <- substr(s,nchar(s)-1,nchar(s)-1)
if ((last1 == ".") || (last1 == "," ))
{
dec <- substr(s,nchar(s),nchar(s))
wholes <- substr(s,1,nchar(s)-2)
wholes <- gsub(".","",wholes, fixed = TRUE)
wholes <- gsub(",","",wholes, fixed = TRUE)
ret <- as.numeric(wholes) + as.numeric(dec)/10
} else {
last2 <- substr(s,nchar(s)-2,nchar(s)-2)
if ((last2 == ".") || (last2 == "," ))
{
hund <- substr(s,nchar(s)-1,nchar(s))
wholes <- substr(s,1,nchar(s)-3)
wholes <- gsub(".","",wholes, fixed = TRUE)
wholes <- gsub(",","",wholes, fixed = TRUE)
ret <- as.numeric(wholes) + as.numeric(hund)/100
} else {
wholes <- substr(s,1,nchar(s))
wholes <- gsub(".","",wholes, fixed = TRUE)
wholes <- gsub(",","",wholes, fixed = TRUE)
ret <- as.numeric(wholes)
}
}
ret
}
cordig(g)
debug(cordig)
cordig <- function (s)
{
last1 <- substr(s,nchar(s)-1,nchar(s)-1)
if ((last1 == ".") || (last1 == "," ))
{
dec <- substr(s,nchar(s),nchar(s))
wholes <- substr(s,1,nchar(s)-2)
wholes <- gsub(".","",wholes, fixed = TRUE)
wholes <- gsub(",","",wholes, fixed = TRUE)
ret <- as.numeric(wholes)
ret <- ret + as.numeric(dec)/10
} else {
last2 <- substr(s,nchar(s)-2,nchar(s)-2)
if ((last2 == ".") || (last2 == "," ))
{
hund <- substr(s,nchar(s)-1,nchar(s))
wholes <- substr(s,1,nchar(s)-3)
wholes <- gsub(".","",wholes, fixed = TRUE)
wholes <- gsub(",","",wholes, fixed = TRUE)
ret <- as.numeric(wholes)
ret <- ret + as.numeric(hund)/100
} else {
wholes <- substr(s,1,nchar(s))
wholes <- gsub(".","",wholes, fixed = TRUE)
wholes <- gsub(",","",wholes, fixed = TRUE)
ret <- as.numeric(wholes)
}
}
ret
}
cordig(g)
debug(g)
debug(cordig)
cordig(g)
ret + as.numeric(hund)/100
as.numeric(hund)/100
ret + 0.25
h <- as.numeric(hund)/100
ret + h
h
ret <- as.double(ret) + h
cordig <- function (s)
{
last1 <- substr(s,nchar(s)-1,nchar(s)-1)
if ((last1 == ".") || (last1 == "," ))
{
dec <- substr(s,nchar(s),nchar(s))
wholes <- substr(s,1,nchar(s)-2)
wholes <- gsub(".","",wholes, fixed = TRUE)
wholes <- gsub(",","",wholes, fixed = TRUE)
ret <- as.numeric(wholes)
ret <- as.real(ret) + as.numeric(dec)/10
} else {
last2 <- substr(s,nchar(s)-2,nchar(s)-2)
if ((last2 == ".") || (last2 == "," ))
{
hund <- substr(s,nchar(s)-1,nchar(s))
wholes <- substr(s,1,nchar(s)-3)
wholes <- gsub(".","",wholes, fixed = TRUE)
wholes <- gsub(",","",wholes, fixed = TRUE)
ret <- as.numeric(wholes)
ret <- as.real(ret) + as.numeric(hund)/100
} else {
wholes <- substr(s,1,nchar(s))
wholes <- gsub(".","",wholes, fixed = TRUE)
wholes <- gsub(",","",wholes, fixed = TRUE)
ret <- as.numeric(wholes)
}
}
ret
}
cordig(g)
cordig <- function (s)
{
last1 <- substr(s,nchar(s)-1,nchar(s)-1)
if ((last1 == ".") || (last1 == "," ))
{
dec <- substr(s,nchar(s),nchar(s))
wholes <- substr(s,1,nchar(s)-2)
wholes <- gsub(".","",wholes, fixed = TRUE)
wholes <- gsub(",","",wholes, fixed = TRUE)
ret <- as.numeric(wholes)
ret <- as.double(ret) + as.numeric(dec)/10
} else {
last2 <- substr(s,nchar(s)-2,nchar(s)-2)
if ((last2 == ".") || (last2 == "," ))
{
hund <- substr(s,nchar(s)-1,nchar(s))
wholes <- substr(s,1,nchar(s)-3)
wholes <- gsub(".","",wholes, fixed = TRUE)
wholes <- gsub(",","",wholes, fixed = TRUE)
ret <- as.numeric(wholes)
ret <- as.double(ret) + as.numeric(hund)/100
} else {
wholes <- substr(s,1,nchar(s))
wholes <- gsub(".","",wholes, fixed = TRUE)
wholes <- gsub(",","",wholes, fixed = TRUE)
ret <- as.numeric(wholes)
}
}
ret
}
cordig(g)
cordig <- function (s)
{
last1 <- substr(s,nchar(s)-1,nchar(s)-1)
if ((last1 == ".") || (last1 == "," ))
{
dec <- substr(s,nchar(s),nchar(s))
wholes <- substr(s,1,nchar(s)-2)
wholes <- gsub(".","",wholes, fixed = TRUE)
wholes <- gsub(",","",wholes, fixed = TRUE)
ret <- as.numeric(wholes)
ret <- as.double(ret) + as.double(as.numeric(dec)/10)
} else {
last2 <- substr(s,nchar(s)-2,nchar(s)-2)
if ((last2 == ".") || (last2 == "," ))
{
hund <- substr(s,nchar(s)-1,nchar(s))
wholes <- substr(s,1,nchar(s)-3)
wholes <- gsub(".","",wholes, fixed = TRUE)
wholes <- gsub(",","",wholes, fixed = TRUE)
ret <- as.numeric(wholes)
ret <- as.double(ret) + as.double(as.numeric(hund)/100)
} else {
wholes <- substr(s,1,nchar(s))
wholes <- gsub(".","",wholes, fixed = TRUE)
wholes <- gsub(",","",wholes, fixed = TRUE)
ret <- as.numeric(wholes)
}
}
ret
}
cordig(g)
cordig <- function (s)
{
last1 <- substr(s,nchar(s)-1,nchar(s)-1)
if ((last1 == ".") || (last1 == "," ))
{
dec <- substr(s,nchar(s),nchar(s))
wholes <- substr(s,1,nchar(s)-2)
wholes <- gsub(".","",wholes, fixed = TRUE)
wholes <- gsub(",","",wholes, fixed = TRUE)
ret <- as.double(wholes)
ret <- as.double(ret) + as.double(as.numeric(dec)/10)
} else {
last2 <- substr(s,nchar(s)-2,nchar(s)-2)
if ((last2 == ".") || (last2 == "," ))
{
hund <- substr(s,nchar(s)-1,nchar(s))
wholes <- substr(s,1,nchar(s)-3)
wholes <- gsub(".","",wholes, fixed = TRUE)
wholes <- gsub(",","",wholes, fixed = TRUE)
ret <- as.double(wholes)
ret <- as.double(ret) + as.double(as.numeric(hund)/100)
} else {
wholes <- substr(s,1,nchar(s))
wholes <- gsub(".","",wholes, fixed = TRUE)
wholes <- gsub(",","",wholes, fixed = TRUE)
ret <- as.double(wholes)
}
}
ret
}
cordig(g)
g
u <- "321233769.25"
as.numeric(u)
as.double(u)
u <- "321233.25"
as.numeric(u)
as.complex(u)
.Machine
as.numeric(g)
u <- "321233769.25"
as.numeric("321233769.25")
u
u <- 321233769.25
u
u <- cordig(g)
u
u - 312233769
y <- u - 312233769
y
y <- u - 321233769
y
u <- cordig(g)
head(sapply(t$content,cordig),3)
head(sapply(as.character(t$content),cordig),3)
head(t$content,3)
cordig(t$content[2])
w <- as.character(t$content)
cordig(q[2])
cordig(w[2])
y <- cordig(w[2])
library(xlsx)
cordig <- function (s)
{
last1 <- substr(s,nchar(s)-1,nchar(s)-1)
if ((last1 == ".") || (last1 == "," ))
{
dec <- substr(s,nchar(s),nchar(s))
wholes <- substr(s,1,nchar(s)-2)
wholes <- gsub(".","",wholes, fixed = TRUE)
wholes <- gsub(",","",wholes, fixed = TRUE)
ret <- as.double(wholes)
ret <- ret + as.numeric(dec)/10
} else {
last2 <- substr(s,nchar(s)-2,nchar(s)-2)
if ((last2 == ".") || (last2 == "," ))
{
hund <- substr(s,nchar(s)-1,nchar(s))
wholes <- substr(s,1,nchar(s)-3)
wholes <- gsub(".","",wholes, fixed = TRUE)
wholes <- gsub(",","",wholes, fixed = TRUE)
ret <- as.numeric(wholes)
ret <- ret + as.numeric(hund)/100
} else {
wholes <- substr(s,1,nchar(s))
wholes <- gsub(".","",wholes, fixed = TRUE)
wholes <- gsub(",","",wholes, fixed = TRUE)
ret <- as.numeric(wholes)
}
}
ret
}
t <- read.xlsx("Corrected_numbers.xlsx", sheetIndex = 1)
sapply(t$content, cordig)
s <- as.character(s)
source('/media/pavlo/UUI/digits_refine.R')
sapply(t$content, cordig)
lapply(t$content, cordig)
debug(cordig)
sapply(t$content, cordig)
undebug(cordig)
sapply(t$content, cordig)
source('/media/pavlo/UUI/digits_refine.R')
sapply(t$content, cordig)
is.na(t$content)
sum(as.numeric(is.na(t$content)))
head(t$content)
t$content(is.na(t$content))
t$content[is.na(t$content)]
for (i in 1:6832)
{
if (is.na(t$content)) print(i)
}
for (i in 1:6832)
+ {
+     if (is.na(t$content)) print(i)
+ }
for (i in 1:6832)
{
if (is.na(t$content)) print(i)
}
for (i in 1:6832)
{
if (is.na(t$content[i])) print(i)
}
debugSource('/media/pavlo/UUI/digits_refine.R')
sapply(t$content, cordig)
t$content <- sapply(t$content, cordig)
head(t)
write.xlsx(t,"correct.xlsx")
d1 <- read.csv("decl_2011.csv")
d2 <- read.csv("decl_2013.csv")
names(d1) == names(d2)
names(d1)
names(d2)
a <_ c("123","431","444","125")
a <- c("123","431","444","125")
gsub('.*-([0-9]+).*','\\1','Ab_Cd-001234.txt')
gsub('.*-([0-9]+).*','\\1','41_bondarenko_volodymyr_dmytrovych.pdf')
library(stringr)
regexp <- "[[:digit:]]+"
data <- '41_bondarenko_volodymyr_dmytrovych.pdf'
str_extract(data, regexp)
a <- c("123","431","444","125")
grep("1",a)
a[grep("1",a)]
library(data.table)
install.packages("data.table")
install.packages("data.table")
library(data.table)
x <- read.csv("list", header = FALSE)
View(x)
x <- data.table(x)
sentnames(x,"V1","file")
setnames(x,"V1","file")
add_filenames(x)
source('~/R/add_filenames.R')
add_filenames(x)
debug(add_filenames)
add_filenames(x)
files
source('~/R/add_filenames.R')
source('~/R/add_filenames.R')
add_filenames(x)
source('/media/pavlo/UUI/add_filenames.R')
debug(add_filenames)
source('/media/pavlo/UUI/add_filenames.R')
debug(add_filenames)
add_filenames(x)
ret
source('/media/pavlo/UUI/add_filenames.R')
getwd()
source('/media/pavlo/UUI/add_filenames.R')
add_filenames(x)
debugSource('~/R/add_filenames.R')
n
debugSource('/media/pavlo/UUI/add_filenames.R')
files
debugSource('/media/pavlo/UUI/add_filenames.R')
ret
debugSource('~/R/add_filenames.R')
source('~/R/add_filenames.R')
source('~/R/add_filenames.R')
source('~/R/add_filenames.R')
source('~/R/add_filenames.R')
source('~/R/add_filenames.R')
source('~/R/add_filenames.R')
source('~/R/add_filenames.R')
a <- read.csv("Deputies_ids.csv")
length(unique(f$person_id))
length(unique(a$person_id))
a <- read.csv("Deputies_names.csv")
length(unique(a$person_id))
length(unique(a$Deputy))
getwd()
gregexpr(pattern = " ", "2323 35 55   ")
regexpr(pattern = " ", "2323 35 55   ")
class(regexpr(pattern = " ", "2323 35 55   "))
class(gregexpr(pattern = " ", "2323 35 55   "))
grep(pattern = " ", "2323 35 55   ")
library(stringr)
dec <- str_sub("4234342", length("4234342")-2, length("4234342")-2)
dec <- str_sub("4234342", length("4234342")-3, length("4234342")-3)
length("4234342")
seq_len("4234342")
str_len("4234342")
str_length("4234342")
as.numeric("32")
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
refine_decs("4235365.35")
a <- refine_decs("4235365.35")
a <- refine_decs("4235365,35")
source('~/.active-rstudio-document')
a <- refine_decs("4,   235,365,35")
debug(refine_decs)
a <- refine_decs("4,   235,365,35")
source('~/.active-rstudio-document')
a <- refine_decs("4,   235,365,35")
debug(refine_decs)
a <- refine_decs("4,   235,365,35")
source('~/.active-rstudio-document')
a <- refine_decs("4,   235,365,35")
debug(refine_decs)
a <- refine_decs("4,   235,365,35")
x
paste(c("1","2","3"))
length(paste)
length(paste(c("1","2","3")))
length(paste(c("1","2","3")), collapse = "")
length(paste(c("1","2","3"),collapse = ""))
paste(c("1","2","3"),collapse = "")
source('~/.active-rstudio-document')
a <- refine_decs("4,   235,365,35")
debug(refine_decs)
a <- refine_decs("4,   235,365,35")
source('~/.active-rstudio-document')
a <- refine_decs("4,   235,365,35")
debug(refine_decs)
a <- refine_decs("4,   235,365,35")
a <- refine_decs("4,   235,365,35")
str_extract_all(x, regexp)
source('~/.active-rstudio-document')
debug(refine_decs)
source('~/.active-rstudio-document')
debug(refine_decs)
a <- refine_decs("4,   235,365,35")
source('~/.active-rstudio-document')
debug(refine_decs)
a <- refine_decs("4,   235,365,35")
paste(str_extract_all(x, regexp), collapse = "", sep = "")
str_extract_all(x, regexp)
str_extract_all(x, regexp)[[1]]
source('~/.active-rstudio-document')
a <- refine_decs("4,   235,365,35")
source('~/GitHub/Voting_analysis/voting_analysis.r')
str_extract("123456789",c("2","5"))
str_extract("1234,...  56789",c("[[:digit:]]+",",","."))
str_extract_all("1234,...  56789",c("[[:digit:]]+",",","."))
"[[:digit:]]+"
с("[[:digit:]]+", "[:punct:]")
c("[[:digit:]]+", "[:punct:]")
[[:digit:]]+
"[[:digit:]]+" | "[:punct:]"
"[[:digit:]]+|[:punct:]"
str_extract_all("123,апв12", "[[:digit:]]+|[:punct:]")
str_extract_all("123,апв12", "[[:digit:]]+|[:punct:]+")
str_extract_all("123,апв12", "[:digit:+|:punct:]+")
str_extract_all("123,апв12", "[[:digit:]]+|[[:punct:]]+")
source('~/decl_refine/decl_refine.R')
refine_decs("123, 555, 96")
debug(refine_decs)
refine_decs("123, 555, 96")
source('~/decl_refine/decl_refine.R')
refine_decs("123, 555, 96")
a <- refine_decs("123, 555, 96")
a <- refine_decs("123, 555, 96 грн")
source('~/decl_refine/decl_refine.R')
source('~/decl_refine/decl_refine.R')
a <- refine_decs("123, 555, 96 грн")
a <- refine_decs("123, 555, 9 грн")
a <- refine_decs("123, 555 грн")
getwd()
D <- read.csv("digital.csv")
W <- read.csv("written.csv")
W <- read.csv("written.csv")
View(W)
D <- read.csv("digital.csv")
View(D)
names(D) == names(W)
names(D)
names(W)
W <- read.csv("written.csv")
D <- read.csv("digital.csv")
names(D) == names(W)
names(D)
names(W)
W <- read.csv("written.csv")
D <- read.csv("digital.csv")
names(D)
names(W)
reg <-(D, W, by = c("MP.name","date","time.of.day"))
reg <-(D, W, by = c("MP.name","date","time.of.day"))
reg <- merge(D, W, by = c("MP.name","date","time.of.day"))
reg <- merge(D, W, by = c("MP.name","date"))
View(reg)
W <- read.csv("written.csv")
D <- read.csv("digital.csv")
reg <- merge(D, W, by = c("MP.name","date"))
reg <- merge(D, W, by = c("MP.name","date","time.of.day"))
View(reg)
reg2<- reg[reg$registration.x == "Присутній"]
reg2<- reg[reg$registration.x == "Присутній "]
reg2<- reg[reg$registration.x == "Присутній ",]
View(reg2)
W <- read.csv("written.csv")
D <- read.csv("digital.csv")
reg <- merge(D, W, by = c("MP.name","date","time.of.day"))
reg2<- reg[reg$registration.x == "Присутній",]
View(reg2)
reg3 <- reg2[reg2$registration.y != "Зареєстровани"б]
reg3 <- reg2[reg2$registration.y != "Зареєстрований",]
View(reg3)
write.csv(reg3, "uregistered.csv")
setwd("..")
setwd("GitHub/voting_analysis")
source('~/GitHub/voting_analysis/voting_analysis.r')
loadData()
View(factids)
View(mpids)
A <- compare_with_faction(deps = c(17,21554,275,22333,314), fid = 3, absence_as_against = T)
View(A)
F <- vottab$pv[[281]]$MP_ID[vottab$pv[[281]]$faction_id == 4]
#filename <- paste(factids$faction_title[factids$ID == i], ".csv", sep = "")
source('~/GitHub/voting_analysis/table_create.R')
